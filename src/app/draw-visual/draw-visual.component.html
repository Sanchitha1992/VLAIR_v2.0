<div id="mapperPopup">
  <div style="padding:5px;border:black 1px solid">
    <div style="padding: 2px;">
      <input type="text" id="mappedPopuptext" />
    </div>
  </div>
</div>
<div [style.display]="experimentVisible==false?'block':'none'">


  <div style="display: flex; height: 100vh;overflow:hidden">
    <div style="flex:15%" id="leftpanel">
      <div style="width:200px;height:100vh;overflow:auto">
        <table *ngIf="rowData!=null">
          <tr>
            <th></th>
            <th *ngFor="let val of rowData[0]|keyvalue">
              {{val.key}}
            </th>
          </tr>
          <tr *ngFor="let row of rowData;let i =index">
            <td><input type="radio" name="rowIndex" [value]="i" [ngModel]="rowIndex" (ngModelChange)="changeRow($event)" /></td>
            <td *ngFor="let val of row|keyvalue">
              {{val.value}}
            </td>
          </tr>
        </table>
      </div>
    </div>
    <div style="flex:75%">
      <div style="height:320px;">
        <div style="display:flex;">
          <div style="flex:77%;">
            <div class="inlinediv" style="padding-left:15px;padding-right:15px;cursor:default">
              <ul [style.background-color]="selection==true ? 'lightgrey' : null">
                <li id="selectionPrototype" (click)="selection=!selection" class="circularBorder"><a><i class="fa fa-square" style="font-size:25px"></i></a></li>
              </ul>
              <div style="text-align:center">Select</div>
            </div>
            <div class="inlinediv" style="padding-left:15px;padding-right:15px;cursor:default">
              <ul>
                <li><img src="assets/images/coordinates.PNG" width="25" height="25" style="margin-left:10px" (click)="createCoordinate()" /></li>
              </ul>
              <div style="text-align:center">Coordinates</div>
            </div>
            <div class="inlinediv" style="padding-left:15px;padding-right:15px;margin-top:10px;cursor:pointer" (click)="undo()">
              <ul>
                <li><img src="assets/images/undo_new.png" width="25" height="25" style="margin-left:10px" /></li>
              </ul>

              <div style="text-align:center">Undo</div>
            </div>
            <div class="inlinediv" style="padding-left:15px;padding-right:15px;cursor:pointer" (click)="clearAll(canvas)">
              <ul>
                <li><img src="assets/images/clear all.jpg" width="25" height="25" style="margin-left:10px" /></li>
              </ul>
              <div style="text-align:center">Clear All</div>
            </div>
            <div class="inlinediv">
              <ul class="menu nonSelection">
                <li id="rectanglePrototype" draggable="true" class="dragElement circularBorder"><a><i class="mark-rectangle" style="font-size: 25px;"></i></a></li>
                <li id="squarePrototype" draggable="true" class="dragElement circularBorder"><a><i class="mark-square" style="font-size: 25px;"></i></a></li>
                <li id="circlePrototype" draggable="true" class="dragElement circularBorder" style="margin-right: 15px; margin-bottom: 1px;"><a><i class="mark-circle" style="font-size: 25px;"></i></a></li>
              </ul>
              <div style="text-align:center">Shapes</div>
              <div style="text-align:center" (click)="markToolboxVisible=!markToolboxVisible">
                <i class="fa fa-chevron-down fa-1x"></i>
              </div>
              <div style="position:absolute" *ngIf="markToolboxVisible==true">
                <ul class="menu nonSelection">
                  <li id="pathMarkPrototype" draggable="true" class="dragElement circularBorder" style="margin-right: 15px; margin-bottom: 3px;"><a><i class="mark-pathMark" style="font-size: 28px;"></i></a></li>
                  <li id="fatFontPrototype" draggable="true" class="dragElement circularBorder" style="margin-right: 12px; margin-bottom: 3px;"><a><i class="mark-fatfont" style="font-size: 28px;"></i></a></li>
                  <li id="ellipsePrototype" draggable="true" class="dragElement circularBorder" style="margin-right: 12px; margin-bottom: 3px;"><a><i class="mark-ellipse" style="font-size: 28px;"></i></a></li>
                </ul>
              </div>
            </div>
            <div class="inlinediv" style="padding-top: 20px; padding-bottom: 25px;padding-left:5px;padding-right:5px">
              <ul class="menu nonSelection" >
                <li>
                  <select style="font-size:10px" [ngModel]="canvasMode" (ngModelChange)="onCanvasMode($event)">
                    <option>Single</option>
                    <option>Collective</option>
                  </select>
                </li>
              </ul>
            </div>
            <div class="inlinediv" style="padding:7px">
              <div style="display: inline-block; background-color: #460073;" class="keys" (click)="applyChanges()">
                Apply All
              </div>
            </div>
            <canvas id="maincanvas" style="width:100%;height:100%"></canvas>

          </div>
          <div style="flex:23%;height:320px;overflow:auto;border:black 1px solid;border-bottom: 0px;border-top:0px" *ngIf="selectedObject!=null">
            <div>
              <!--div style="text-align:left">
                <div style="font-weight:bold;font-size:14px">Shape</div>
                <div><span style="font-size:12px">Type: {{selectedObject.typename}}</span></div>
                <div><span style="font-size:12px">ID:
                  <input type="text" [(ngModel)]="selectedObject.ID" style="width:70px" />
                  </span></div>
              </div>
              <hr />
              <div class="divHeader">
                Coordinates
              </div>
              <div style="padding-left:30px">
                <div><span>X:</span>
                  <input type="text" class="rightPanelTextbox" [ngModel]="xposition" (ngModelChange)="changex($event)">
                <span>  Y:</span><input type="text" class="rightPanelTextbox" [ngModel]="yposition" (ngModelChange)="changey($event)" /></div>
              </div>
              <hr>
            </div>
            <div>
              <div style="text-align:left">
                &nbsp;<b>Color:</b>
              </div>
              <div style="display:flex" id="colorPaneldiv">
                <div style="flex:50%;padding-left:30px"><input id="colorPanel" type="color" (ngModelChange)="changeColor($event)" [ngModel]="color" /></div>
              </div>

              <hr>
            </div>
            <div style="text-align:center">
              <div style="text-align:left">
                &nbsp;<b>Rotation:</b>
              </div>
              <div style="display:flex" id="rotationPaneldiv">
                <div style="flex:50%;padding:5px">
                  <input id="rotationPanel" [style.background-color]="rotationTitle!=''?'#3C1361':'white'" [style.color]="rotationTitle!=''?'white':'black'"
                  class="rightPanelTextbox" type="text" (ngModelChange)="changeRotation($event)" [ngModel]="rotation" [title]="rotationTitle" />
                  &nbsp;<select [(ngModel)]="rotationOperator">
                    <option>*</option>
                    <option>/</option>
                  </select>
                  &nbsp;<select [(ngModel)]="rotationOperand">
                    <option>1</option>
                    <option>10</option>
                    <option>100</option>
                    <option>1000</option>
                  </select>
                </div>
              </div>

              <hr>
            </div>
            <div style="text-align:center" *ngIf="visibility!=null && visibility['length']==true">
                <div style="text-align:left">
                  &nbsp;<b>Length:</b>
                </div>
              <div>
                <div id="divlength">
                  <input id="length" [style.background-color]="lengthTitle!=''?'#3C1361':'white'" [style.color]="lengthTitle!=''?'white':'black'"
                  [title]="lengthTitle" type="text" class="rightPanelTextbox" [ngModel]="length" (ngModelChange)="changelength($event)" />
                  &nbsp;<select [(ngModel)]="lengthOperator">
                    <option>*</option>
                    <option>/</option>
                  </select>
                  &nbsp;<select [(ngModel)]="lengthOperand">
                    <option>1</option>
                    <option>10</option>
                    <option>100</option>
                    <option>1000</option>
                  </select>
                </div>
              </div>
              <hr>
            </div>
            <div style="text-align:center" *ngIf="visibility!=null && visibility['width']==true">
              <div style="text-align:left">
                &nbsp;<b>Width:</b>
              </div>
              <div>
                <div id="divwidth">
                  <input id="width" [style.background-color]="widthTitle!=''?'#3C1361':'white'" [style.color]="widthTitle!=''?'white':'black'"
                   [title]="widthTitle" type="text" class="rightPanelTextbox" [ngModel]="width" (ngModelChange)="changewidth($event)" />
                  &nbsp;<select [(ngModel)]="widthOperator">
                    <option>*</option>
                    <option>/</option>
                  </select>
                  &nbsp;<select [(ngModel)]="widthOperand">
                    <option>1</option>
                    <option>10</option>
                    <option>100</option>
                    <option>1000</option>
                  </select>
                </div>
              </div>
              <hr>
            </div>
            <div style="text-align:center" *ngIf="visibility!=null && visibility['side']==true">
              <div style="text-align:left">
                &nbsp;<b>Side:</b>
              </div>
              <div>
                <div id="divside">
                    <input id="side" [style.background-color]="sideTitle!=''?'#3C1361':'white'" [style.color]="sideTitle!=''?'white':'black'" 
                    type="text" class="rightPanelTextbox" [ngModel]="side" (ngModelChange)="changeside($event)" title="sideTitle"> &nbsp;<select [(ngModel)]="sideOperator">
                    <option>*</option>
                    <option>/</option>
                  </select>
                  &nbsp;<select [(ngModel)]="sideOperand">
                    <option>1</option>
                    <option>10</option>
                    <option>100</option>
                    <option>1000</option>
                  </select>
                </div>
              </div>
              <hr>
            </div>
            <div style="text-align:center" *ngIf="visibility!=null && visibility['radius']==true">
              <div style="text-align:left">
                &nbsp;<b>Radius:</b>
              </div>
              <div>
                <div id="divradius">
                  <input [style.background-color]="radiusTitle!=''?'#3C1361':'white'" [style.color]="radiusTitle!=''?'white':'black'" 
                  id="radius" type="text" class="rightPanelTextbox" [ngModel]="radius" (ngModelChange)="changeradius($event)" />
                  &nbsp;<select [(ngModel)]="radiusOperator">
                    <option>*</option>
                    <option>/</option>
                  </select>
                  &nbsp;<select [(ngModel)]="radiusOperand">
                    <option>1</option>
                    <option>10</option>
                    <option>100</option>
                    <option>1000</option>
                  </select>
                </div>
              </div>
              <hr>
            </div>
            <div>
              <div style="text-align:left">
                &nbsp;<b>Area:</b>
              </div>
              <div>
                <div style="padding-left:30px"><input type="text" disabled class="rightPanelTextbox" [(ngModel)]="area" /></div>
              </div>
            </div>
          </div>
        </div>
      </div>
      <div style="display: flex; border: 1px solid black; border-left-width: 0px; border-right-width: 0px">
        <div style="flex:100%" id="keytab">
          <div style="display:inline-block" [style.backgroundColor]="keybg[i]" class="keys" *ngFor="let key of keys;let i=index" [id]="'id'+keyid[i]">
            {{key}}
          </div>
        </div>
      </div>
      <div style="display:flex">
        <div style="flex:77%">
          <canvas id="bottomcanvas" style="width:100%;height:100%"></canvas>
        </div>
        <div style="flex:23%; border-left: black 1px solid;border-bottom: black 1px solid;">
          <div style="padding-left:10px">
            <div id="addition-operator" draggable="true" style="border:black 1px solid;display:inline-block;border-radius:20px;padding:5px;margin:5px">
              <i class="operator-additionIcon" style="font-size: 24px; color: #460073;"></i>
            </div>

            <div id="subtraction-operator" draggable="true" style="border: black 1px solid; display: inline-block; border-radius: 20px; padding: 5px; margin: 5px ">
              <i class="operator-subtractionIcon" style="font-size: 24px; color: #460073;"></i>
            </div>
            <div id="multiplication-operator" draggable="true" style="border: black 1px solid; display: inline-block; border-radius: 20px; padding: 5px; margin: 5px">
              <i class="operator-multiplicationIcon" style="font-size: 24px; color: #460073;"></i>
            </div>
            <div id="division-operator" draggable="true" style="border: black 1px solid; display: inline-block; border-radius: 20px; padding: 5px; margin: 5px">
              <i class="operator-divisonIcon" style="font-size: 24px; color: #460073;"></i>
            </div>
          </div>
          <div style="text-align:center">
            <b>Operators</b>
          </div>
          <hr>
          <div style="text-align:center">
            <div style="display:inline-block;padding:5px;cursor:pointer" (click)="clearAll(bottomcanvas)">

              <img src="assets/images/clear all.jpg" width="25" height="25"  />
              <div style="text-align:center;padding-top:5px">
                <b>Clear All</b>
              </div>
            </div>
            <div id="mapperWidget" draggable="true" style=" display: inline-block; border-radius: 20px; padding: 5px; margin: 5px;">
              <i class="collections-mapper" style="font-size: 24px; color: #460073;"></i>
              <div style="text-align:center">
                <b>Mapper Widget</b>
              </div>
            </div>
          </div>
          <hr>
          <div style="text-align:center">
            <div id="isNumericData" draggable="true" style="border: black 1px solid; display: inline-block; border-radius: 20px; padding: 5px; margin: 5px">
              <i class="value-number" style="font-size: 24px; color: #460073;"></i>
            </div>
            <div id="isColorData" draggable="true" style="border: black 1px solid; display: inline-block; border-radius: 20px; padding: 5px; margin: 5px">
              <i class="value-color" style="font-size: 24px; color: #460073;"></i>
            </div>
            <div id="isStringData" draggable="true" style="border: black 1px solid; display: inline-block; border-radius: 20px; padding: 7px; margin: 5px">
              <i class="value-string" style="font-size: 24px; color: #460073;"></i>
            </div>
            <div style="text-align:center">
              <b>Input Values</b>
            </div>
          </div>
        </div>
      </div>
    </div>
    <div id="rightpanel" style="flex:10%;border-left:black 1px solid">
      <div class="inlinediv" *ngFor="let key of keys;let i=index">
        <canvas [id]="'canvas'+i" width="150" height="100"></canvas>
      </div>
    </div>
  </div>


  <div [style.display]="experimentVisible==true?'block':'none'">
    <button type="button" (click)="backToViz()">Back</button>
    <app-experiment *ngIf="experimentVisible==true"></app-experiment>
  </div>
</div>
